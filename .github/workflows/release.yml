name: Release

on:
    push:
        branches:
            - release
            - beta

env:
    GH_TOKEN: ${{ secrets.GH_TOKEN }}
    GIT_AUTHOR_EMAIL: ${{ secrets.GIT_AUTHOR_EMAIL }}
    GIT_AUTHOR_NAME: MT224244

jobs:
    release:
        runs-on: windows-latest
        steps:
          - uses: actions/checkout@v2
          - name: Use Node.js 14.x
            uses: actions/setup-node@v2
            with:
                node-version: 14.x

          - run: npx rimraf node_modules dist_electron
          - run: yarn --frozen-lockfile --non-interactive
          - run: yarn electron:build
          - run: yarn semantic-release
